function Gallery(){this.items=document.querySelectorAll("article.gallery-item"),this.bg=document.querySelector(".backimage"),this.init=function(){for(var e=this,t=0;t<e.items.length;t++)e.items[t].addEventListener("click",function(){e.changeImage(this)});e.swipeDetection(function(t){if("none"===t)return!1;var n,i=document.querySelector(".gallery-item.active");"left"!==t&&"top"!==t||null===(n=i.previousElementSibling)&&(n=e.items[e.items.length-1]),"right"!==t&&"bottom"!==t||null===(n=i.nextElementSibling)&&(n=e.items[0]),n.onclick?n.onclick():n.click&&n.click()}),this.changeImage(this.items[0])},this.changeImage=function(e){for(var t=this,n=e.querySelector("img").src,i=0;i<t.items.length;i++)t.items[i].classList.remove("active");e.classList.add("active"),t.bg.classList.remove("fadeout","fadein"),t.bg.classList.add("fadeout"),setTimeout(function(){t.bg.classList.remove("fadeout"),t.bg.classList.add("fadein"),t.bg.style.backgroundImage="url('"+n+"')"},500)},this.swipeDetection=function(e){var t,n,i,a,o,l,r=this.bg,s=e||function(e){};r.addEventListener("touchstart",function(e){var a=e.changedTouches[0];t="none",dist=0,n=a.pageX,i=a.pageY,l=(new Date).getTime(),e.preventDefault()},!1),r.addEventListener("touchmove",function(e){e.preventDefault()},!1),r.addEventListener("touchend",function(e){var r=e.changedTouches[0];a=r.pageX-n,o=r.pageY-i,(new Date).getTime()-l<=300&&(Math.abs(a)>=80&&Math.abs(o)<=100?t=a<0?"left":"right":Math.abs(o)>=80&&Math.abs(a)<=100&&(t=o<0?"up":"down")),s(t),e.preventDefault()},!1)},this.init()}!function(t){var n={el:null,init:function(){for(var t=this,n=document.querySelectorAll("body .accordion"),i=0;i<n.length;i++)n[i].addEventListener("click",function(n){var i=n.target||e.srcElement;i.className.indexOf("menu-label")>-1&&t._toggleActive(i)})},_toggleActive:function(e){var t=e.nextElementSibling;return-1===e.className.indexOf("active")?(e.classList.add("active"),t.style.height=1.3*this._innerHeight(t)+"px"):(e.classList.remove("active"),t.style.height=0),e},_innerHeight:function(e){height=0;for(var t=e.querySelectorAll("*"),n=0;n<t.length;n++)height+=t[n].clientHeight;return height}};window.$AC=n}(),$AC.init(),function(window){var calc={result:null,elements:{display:document.getElementById("display")},_setDisplay:function(e){display.value=e},clear:function(){this._setDisplay("")},del:function(){var e=this.elements.display.value.slice(0,-1);"."!==e[e.length-1]&&","!==e[e.length-1]||(e=e.slice(0,-1)),this._setDisplay(e)},equals:function(){this.result=this.elements.display.value;var evalCode=this.result/100+";";this._setDisplay(eval(evalCode))}};window.calc=calc}(window),function(e){function t(e){var t=e;this.items=t.querySelectorAll(".carousel__items > .carousel__item"),this.navItems=null,this.arrows=null,this.init=function(){this._generateNavigation(),this._generateArrows()},this.goTo=function(e){var n=t.querySelector(".carousel__nav > .carousel__nav-item--active"),i=t.querySelector(".carousel__item--active");n.classList.remove("carousel__nav-item--active"),i.classList.remove("carousel__item--active"),this.navItems[e].classList.add("carousel__nav-item--active"),this.items[e].classList.add("carousel__item--active")},this.arrowNav=function(e){var n=t.querySelector(".carousel__nav > .carousel__nav-item--active"),i=Number.parseInt(n.dataset.index)+e;void 0===this.navItems[i]&&(i=e>0?0:this.navItems.length-1),this.goTo(i)},this._generateNavigation=function(){var e=this,n=this.items,i="",a="carousel__nav-item--active",o=document.createElement("div");i+='<ul class="carousel__nav">';for(var l=0;l<n.length;l++)i+='<li class="carousel__nav-item '+a+'" data-index='+l+"> </li>",a="";i+="</ul>",o.innerHTML=i,t.appendChild(o),this.navItems=t.querySelectorAll(".carousel__nav > li");for(l=0;l<this.navItems.length;l++)this.navItems[l].addEventListener("click",function(){e.arrowNav(1),e.goTo(this.dataset.index)})},this._generateArrows=function(){var e=this,n=document.createElement("div");n.innerHTML='<span class="carousel__arrow carousel__arrow--left fa fa-chevron-left"></span><span class="carousel__arrow carousel__arrow--right fa fa-chevron-right"></span>',t.appendChild(n),t.querySelector(".carousel__arrow--left").addEventListener("click",function(){e.arrowNav(-1)}),t.querySelector(".carousel__arrow--right").addEventListener("click",function(){e.arrowNav(1)})}}window.carousel=function(e){for(var n=document.querySelectorAll(".carousel"),i=0;i<n.length;i++){var a=new t(n[i]);a.init()}return a}()}();var $G=new Gallery;function windowWidthCount(){document.querySelector(".window-width-label").innerHTML=window.outerWidth}function closeLateralMenu(){document.querySelector("#menu-open").checked=""}function loadLiveExample(e){document.querySelector(".iframe-live").src=e}window.onload=function(){windowWidthCount()},window.addEventListener("resize",function(){windowWidthCount()}),function(e){$images=document.querySelectorAll("img[data-src]");for(var t=0;t<$images.length;t++){var n=a();$images[t].parentElement.insertBefore(n,$images[t]),$images[t].setAttribute("src",$images[t].getAttribute("data-src")),$images[t].onload=i($images[t],n)}function i(e,t){return function(){t.remove(),e.removeAttribute("data-src")}}function a(){var e=document.createElement("div");return e.classList.add("img-loader"),e.innerHTML='<div class="img-loader__icon"><span class="fa fa-refresh fa-spin"></span></div>',e}}(window),function(e){var t="modal__overlay--active";function n(e){e.style.opacity=1,function n(){(e.style.opacity-=.1)<0?(e.style.display="none",e.classList.remove(t)):requestAnimationFrame(n)}()}e.modal=function(e){var i,a=null,o=document.querySelector('[data-modal-id="'+e+'"]');return document.querySelector('.modal__overlay > [data-modal-id="'+e+'"]')&&(a=document.querySelector('.modal__overlay > [data-modal-id="'+e+'"]').parentElement),null===a&&(i=document.querySelector("body"),(a=document.createElement("section")).style.display="none",a.classList.add("modal__overlay"),a.classList.add("modal__overlay--active"),o.style.display="block",a.appendChild(o),i.appendChild(a),function(){for(var e=a.querySelectorAll("[data-close]"),t=0;t<e.length;t++)e[t].addEventListener("click",function(){n(a)})}()),{fadeIn:function(){var e;console.log(a),(e=a).style.opacity=0,e.style.display="block",function n(){var i=parseFloat(e.style.opacity);(i+=.1)>1||(e.style.opacity=i,e.classList.add(t),requestAnimationFrame(n))}()},fadeOut:function(){console.log(a),n(a)}}};for(var i=document.querySelectorAll("[data-modal-open]"),a=0;a<i.length;a++)i[a].addEventListener("click",function(){var t=this.dataset.modalOpen;e.modal(t).fadeIn()})}(window),window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},function(e){var t=this,n=document.querySelector(".content-holder"),i=document.querySelector(".navbar").getBoundingClientRect().height+10;t.getPosY=function(e){return(e=e.getBoundingClientRect()).top+n.scrollTop-i},t.scrollToElement=function(i,a,o){if(a||(a=1e3),i.nodeName||(i=document.querySelector(i)),!i)throw"Element inexistent!";var l,r=n.scrollTop,s=t.getPosY(i)-r;e.requestAnimFrame(function t(i){l||(l=i);var c,u=i-l,d=Math.min(u/a,1);d=(c=d)<.5?4*c*c*c:(c-1)*(2*c-2)*(2*c-2)+1,n.scrollTo(0,r+s*d),u<a?e.requestAnimFrame(t):o&&o()})},e.scrollToElement=t.scrollToElement}(window),function(e){var t=document.querySelectorAll(".tab__title");function n(e){for(var t=document.querySelectorAll(".tab__title--selected"),n=document.querySelector(".tab__content--selected"),i=document.querySelector("[data-content-id='"+e+"']"),a=document.querySelectorAll("[data-tab-id='"+e+"']"),o=0;o<t.length;o++)t[o].classList.remove("tab__title--selected");for(o=0;o<a.length;o++)a[o].classList.add("tab__title--selected");n.classList.remove("tab__content--selected"),i.classList.add("tab__content--selected")}for(var i=0;i<t.length;i++)t[i].addEventListener("click",function(){n(this.dataset.tabId)});var a=document.querySelectorAll(".tab__container > .tab__title");for(i=0;i<a.length;i++)a[i].addEventListener("click",function(){e.scrollToElement(this,1e3)})}(window),function(e){"use strict";function t(e){var t=new XMLHttpRequest;t.onload=function(){var t,n;t=e,n=this.response,document.getElementById("triviaNumber").innerHTML=t,document.getElementById("triviaAnswer").innerHTML=n},t.open("GET","http://numbersapi.com/"+e),t.setRequestHeader("Accept","application/json"),t.send()}function n(){t(Math.floor(200*Math.random()))}n(),e.newTrivia=n}(window);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdhbGxlcnkuanMiLCJhY2NvcmRpb24uanMiLCJjYWxjdWxhdG9yLmpzIiwiY2Fyb3VzZWwuanMiLCJnbG9iYWwuanMiLCJsYXp5LWxvYWQuanMiLCJtb2RhbC5qcyIsInNjcm9sbHRvLmpzIiwidGFiLmpzIiwidHJpdmlhLmpzIl0sIm5hbWVzIjpbIkdhbGxlcnkiLCJ0aGlzIiwiaXRlbXMiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJiZyIsInF1ZXJ5U2VsZWN0b3IiLCJpbml0Iiwic2VsZiIsIngiLCJsZW5ndGgiLCJhZGRFdmVudExpc3RlbmVyIiwiY2hhbmdlSW1hZ2UiLCJzd2lwZURldGVjdGlvbiIsInN3aXBlRGlyIiwic2VsZWN0ZWRJdGVtIiwiYWN0aXZlSXRlbSIsInByZXZpb3VzRWxlbWVudFNpYmxpbmciLCJuZXh0RWxlbWVudFNpYmxpbmciLCJvbmNsaWNrIiwiY2xpY2siLCJpdGVtIiwic3JjIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwiYWRkIiwic2V0VGltZW91dCIsInN0eWxlIiwiYmFja2dyb3VuZEltYWdlIiwiY2FsbGJhY2siLCJzd2lwZWRpciIsInN0YXJ0WCIsInN0YXJ0WSIsImRpc3RYIiwiZGlzdFkiLCJzdGFydFRpbWUiLCJ0b3VjaHN1cmZhY2UiLCJoYW5kbGVzd2lwZSIsImUiLCJ0b3VjaG9iaiIsImNoYW5nZWRUb3VjaGVzIiwiZGlzdCIsInBhZ2VYIiwicGFnZVkiLCJEYXRlIiwiZ2V0VGltZSIsInByZXZlbnREZWZhdWx0IiwiTWF0aCIsImFicyIsIndpbmRvdyIsImFjY29yZGlvbiIsImVsIiwiYWNMaXN0IiwiZXZlbnQiLCJjbGlja2VkRWxlbWVudCIsInRhcmdldCIsInNyY0VsZW1lbnQiLCJjbGFzc05hbWUiLCJpbmRleE9mIiwiX3RvZ2dsZUFjdGl2ZSIsImJvZHlFbCIsImhlaWdodCIsIl9pbm5lckhlaWdodCIsImlubmVyRWxlbWVudHMiLCJpIiwiY2xpZW50SGVpZ2h0IiwiJEFDIiwiY2FsYyIsInJlc3VsdCIsImVsZW1lbnRzIiwiZGlzcGxheSIsImdldEVsZW1lbnRCeUlkIiwiX3NldERpc3BsYXkiLCJjb250ZW50IiwidmFsdWUiLCJjbGVhciIsImRlbCIsImRpc3BsYXlWYWx1ZSIsInNsaWNlIiwiZXF1YWxzIiwiZXZhbENvZGUiLCJldmFsIiwiQ2Fyb3VzZWwiLCJlbGVtZW50Iiwicm9vdCIsIm5hdkl0ZW1zIiwiYXJyb3dzIiwiX2dlbmVyYXRlTmF2aWdhdGlvbiIsIl9nZW5lcmF0ZUFycm93cyIsImdvVG8iLCJpbmRleCIsInNlbGVjdGVkTmF2Iiwic2VsZWN0ZWRDb250ZW50IiwiYXJyb3dOYXYiLCJkaXJlY3Rpb24iLCJnb3RvSW5kZXgiLCJOdW1iZXIiLCJwYXJzZUludCIsImRhdGFzZXQiLCJ1bmRlZmluZWQiLCJodG1sIiwiZmlyc3RDbGFzcyIsIm5hdkVsZW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiaW5uZXJIVE1MIiwiYXBwZW5kQ2hpbGQiLCJhcnJvd0NvbnRhaW5lciIsImNhcm91c2VsIiwiY2Fyb3VzZWxzIiwiY2FyIiwiJEciLCJ3aW5kb3dXaWR0aENvdW50Iiwib3V0ZXJXaWR0aCIsImNsb3NlTGF0ZXJhbE1lbnUiLCJjaGVja2VkIiwibG9hZExpdmVFeGFtcGxlIiwib25sb2FkIiwiJGltYWdlcyIsImxvYWRpbmciLCJjcmVhdGVMb2FkaW5nIiwicGFyZW50RWxlbWVudCIsImluc2VydEJlZm9yZSIsInNldEF0dHJpYnV0ZSIsImdldEF0dHJpYnV0ZSIsIm9uTG9hZEltYWdlIiwiaW1hZ2UiLCJyZW1vdmVBdHRyaWJ1dGUiLCJjYkNsYXNzIiwiZmFkZU91dCIsIm9wYWNpdHkiLCJmYWRlIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwibW9kYWwiLCJpZE1vZGFsIiwiYm9keSIsIm1vZGFsT3ZlcmxheSIsImNsb3NlRWxlbWVudHMiLCJfcmVnaXN0ZXJDbG9zZUV2ZW50cyIsImZhZGVJbiIsImNvbnNvbGUiLCJsb2ciLCJ2YWwiLCJwYXJzZUZsb2F0IiwibW9kYWxPcGVuZXJzIiwibW9kYWxPcGVuIiwicmVxdWVzdEFuaW1GcmFtZSIsIndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZSIsIm1velJlcXVlc3RBbmltYXRpb25GcmFtZSIsInNjcm9sbFdpbmRvdyIsIm1lbnVIZWlnaHQiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJnZXRQb3NZIiwidG9wIiwic2Nyb2xsVG9wIiwic2Nyb2xsVG9FbGVtZW50IiwiZHVyYXRpb24iLCJjYkZ1bmN0aW9uIiwibm9kZU5hbWUiLCJzdGFydCIsInN0YXJ0aW5nWSIsImRpZmYiLCJzdGVwIiwidGltZXN0YW1wIiwidCIsInRpbWUiLCJwZXJjZW50IiwibWluIiwic2Nyb2xsVG8iLCJ0YWJzIiwidG9nZ2xlVGFiIiwidGFiSWQiLCJwcmV2aW91c1RhYnMiLCJwcmV2aW91c0NvbnRlbnQiLCJhY3RpdmVDb250ZW50IiwiYWN0aXZlVGFicyIsInRhYnNDb250YWluZXIiLCJfcmVxdWVzdFRyaXZpYSIsIm51bWJlciIsInhociIsIlhNTEh0dHBSZXF1ZXN0IiwiYW5zd2VyIiwicmVzcG9uc2UiLCJvcGVuIiwic2V0UmVxdWVzdEhlYWRlciIsInNlbmQiLCJuZXdUcml2aWEiLCJmbG9vciIsInJhbmRvbSJdLCJtYXBwaW5ncyI6IkFBQUEsU0FBQUEsVUFDQUMsS0FBQUMsTUFBQUMsU0FBQUMsaUJBQUEsd0JBQ0FILEtBQUFJLEdBQUFGLFNBQUFHLGNBQUEsY0FFQUwsS0FBQU0sS0FBQSxXQUVBLElBREEsSUFBQUMsRUFBQVAsS0FDQVEsRUFBQSxFQUFBQSxFQUFBRCxFQUFBTixNQUFBUSxPQUFBRCxJQUNBRCxFQUFBTixNQUFBTyxHQUFBRSxpQkFBQSxRQUFBLFdBQ0FILEVBQUFJLFlBQUFYLFFBS0FPLEVBQUFLLGVBQUEsU0FBQUMsR0FFQSxHQUFBLFNBQUFBLEVBQUEsT0FBQSxFQUVBLElBRUFDLEVBRkFDLEVBQUFiLFNBQUFHLGNBQUEsd0JBR0EsU0FBQVEsR0FBQSxRQUFBQSxHQUlBLFFBRkFDLEVBQUFDLEVBQUFDLDBCQUlBRixF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SUFDQVQsRUFyQkFqSSxLQUFBMkksTUFBQSxJQUFBM0ksS0FBQTRJLFdBd0JBRixJQUVBeEksRUFBQXdJLFVBQUFBLEVBOUJBLENBK0JBeEkiLCJmaWxlIjoic2NyaXB0Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIEdhbGxlcnkoKSB7XHJcblx0dGhpcy5pdGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2FydGljbGUuZ2FsbGVyeS1pdGVtJyk7XHJcblx0dGhpcy5iZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5iYWNraW1hZ2UnKTtcclxuXHJcblx0dGhpcy5pbml0ID0gZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgc2VsZiA9IHRoaXM7XHRcdFxyXG5cdFx0Zm9yKHZhciB4ID0gMDsgeCA8IHNlbGYuaXRlbXMubGVuZ3RoOyB4KyspIHtcclxuXHRcdFx0c2VsZi5pdGVtc1t4XS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsZnVuY3Rpb24oKXtcclxuXHRcdFx0XHRzZWxmLmNoYW5nZUltYWdlKHRoaXMpO1xyXG5cdFx0XHR9KTtcdFx0XHRcclxuXHRcdH1cclxuXHJcblx0XHQvL0luaXQgc3dpcGUgZGV0ZWN0aW9uXHJcblx0XHRzZWxmLnN3aXBlRGV0ZWN0aW9uKGZ1bmN0aW9uKHN3aXBlRGlyKXtcclxuXHJcblx0XHRcdGlmKHN3aXBlRGlyID09PSAnbm9uZScpIHJldHVybiBmYWxzZTtcclxuXHJcblx0XHRcdHZhciBhY3RpdmVJdGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmdhbGxlcnktaXRlbS5hY3RpdmUnKTtcclxuXHJcblx0XHRcdHZhciBzZWxlY3RlZEl0ZW07XHJcblx0XHRcdGlmKHN3aXBlRGlyID09PSBcImxlZnRcIiB8fCBzd2lwZURpciA9PT0gXCJ0b3BcIikge1xyXG5cdFx0XHRcdC8vUHJldmlvdXNcclxuXHRcdFx0XHRzZWxlY3RlZEl0ZW0gPSBhY3RpdmVJdGVtLnByZXZpb3VzRWxlbWVudFNpYmxpbmc7XHJcblxyXG5cdFx0XHRcdGlmKHNlbGVjdGVkSXRlbSA9PT0gbnVsbCkge1xyXG5cdFx0XHRcdFx0Ly9JZiB0aGVyZSBpcyBubyBwcmV2aW91cyBpdGVtLCB1c2VzIHRoZSBsYXN0IG9uZVxyXG5cdFx0XHRcdFx0c2VsZWN0ZWRJdGVtID0gc2VsZi5pdGVtc1tzZWxmLml0ZW1zLmxlbmd0aCAtMV07XHJcblx0XHRcdFx0fVx0XHRcdFx0XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmKHN3aXBlRGlyID09PSBcInJpZ2h0XCIgfHwgc3dpcGVEaXIgPT09IFwiYm90dG9tXCIpIHtcclxuXHRcdFx0XHQvL05leHRcclxuXHRcdFx0XHRzZWxlY3RlZEl0ZW0gPSBhY3RpdmVJdGVtLm5leHRFbGVtZW50U2libGluZztcdFxyXG5cclxuXHRcdFx0XHRpZihzZWxlY3RlZEl0ZW0gPT09IG51bGwpIHtcclxuXHRcdFx0XHRcdC8vSWYgdGhlcmUgaXMgbm8gbmV4dCBpdGVtLCB1c2VzIHRoZSBmaXJzdCBvbmVcclxuXHRcdFx0XHRcdHNlbGVjdGVkSXRlbSA9IHNlbGYuaXRlbXNbMF07XHJcblx0XHRcdFx0fVx0XHRcdFx0XHRcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly9GRi9DaHJvbWUgY2xpY2sgbmFtZSBmdW5jdGlvbiBkaWZmZXJlbmNlXHJcblx0XHRcdGlmIChzZWxlY3RlZEl0ZW0ub25jbGljaykge1xyXG5cdFx0XHQgICBzZWxlY3RlZEl0ZW0ub25jbGljaygpO1xyXG5cdFx0XHR9IGVsc2UgaWYgKHNlbGVjdGVkSXRlbS5jbGljaykge1xyXG5cdFx0XHQgICBzZWxlY3RlZEl0ZW0uY2xpY2soKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5jaGFuZ2VJbWFnZSh0aGlzLml0ZW1zWzBdKTtcclxuXHR9O1xyXG5cclxuXHR0aGlzLmNoYW5nZUltYWdlID0gZnVuY3Rpb24oaXRlbSkge1xyXG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cdFx0dmFyIHNyYyA9IGl0ZW0ucXVlcnlTZWxlY3RvcignaW1nJykuc3JjO1xyXG5cclxuXHRcdGZvcih2YXIgeCA9IDA7IHggPCBzZWxmLml0ZW1zLmxlbmd0aDsgeCsrKSB7XHJcblx0XHRcdHNlbGYuaXRlbXNbeF0uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly9zZXQgdGhlIHNlbGVjdGVkIGl0ZW0gYXMgYWN0aXZlXHJcblx0XHRpdGVtLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xyXG5cclxuXHJcblx0XHRzZWxmLmJnLmNsYXNzTGlzdC5yZW1vdmUoJ2ZhZGVvdXQnLCdmYWRlaW4nKTtcclxuXHRcdHNlbGYuYmcuY2xhc3NMaXN0LmFkZCgnZmFkZW91dCcpO1xyXG5cclxuXHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuXHRcdFx0c2VsZi5iZy5jbGFzc0xpc3QucmVtb3ZlKCdmYWRlb3V0Jyk7XHJcblx0XHRcdHNlbGYuYmcuY2xhc3NMaXN0LmFkZCgnZmFkZWluJyk7XHJcblx0XHRcdHNlbGYuYmcuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gXCJ1cmwoJ1wiK3NyYytcIicpXCI7XHJcblx0XHR9LDUwMCk7XHJcblx0XHRcclxuXHJcblx0fTtcclxuXHRcclxuXHQvLyBUaGFua3MgdG8gaHR0cDovL3d3dy5qYXZhc2NyaXB0a2l0LmNvbS9qYXZhdHV0b3JzL3RvdWNoZXZlbnRzMi5zaHRtbFxyXG5cdC8vIFBTOi4gSSd2ZSBkb25lIHRoaXMganVzdCBmb3Igc3R1ZHkgcHVycG9zZXMsIGknZCByYXRoZXIgdG8gc2VwYXJhdGUgdGhpcyBjb2RlIG91dHNpZGUgdGhlIGdhbGxlcnkgaXRzZWxmXHJcblx0dGhpcy5zd2lwZURldGVjdGlvbiA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XHJcblx0XHR2YXIgdG91Y2hzdXJmYWNlID0gdGhpcy5iZyxcclxuXHRcdHN3aXBlZGlyLFxyXG5cdCAgICBzdGFydFgsXHJcblx0ICAgIHN0YXJ0WSxcclxuXHQgICAgZGlzdFgsXHJcblx0ICAgIGRpc3RZLFxyXG5cdCAgICB0aHJlc2hvbGQgPSA4MCwgLy9yZXF1aXJlZCBtaW4gZGlzdGFuY2UgdHJhdmVsZWQgdG8gYmUgY29uc2lkZXJlZCBzd2lwZVxyXG5cdCAgICByZXN0cmFpbnQgPSAxMDAsIC8vIG1heGltdW0gZGlzdGFuY2UgYWxsb3dlZCBhdCB0aGUgc2FtZSB0aW1lIGluIHBlcnBlbmRpY3VsYXIgZGlyZWN0aW9uXHJcblx0ICAgIGFsbG93ZWRUaW1lID0gMzAwLCAvLyBtYXhpbXVtIHRpbWUgYWxsb3dlZCB0byB0cmF2ZWwgdGhhdCBkaXN0YW5jZVxyXG5cdCAgICBlbGFwc2VkVGltZSxcclxuXHQgICAgc3RhcnRUaW1lLFxyXG5cdCAgICBoYW5kbGVzd2lwZSA9IGNhbGxiYWNrIHx8IGZ1bmN0aW9uKHN3aXBlZGlyKXt9XHJcblxyXG5cdCAgICB0b3VjaHN1cmZhY2UuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIGZ1bmN0aW9uKGUpe1xyXG5cdCAgICAgICAgdmFyIHRvdWNob2JqID0gZS5jaGFuZ2VkVG91Y2hlc1swXVxyXG5cdCAgICAgICAgc3dpcGVkaXIgPSAnbm9uZSdcclxuXHQgICAgICAgIGRpc3QgPSAwXHJcblx0ICAgICAgICBzdGFydFggPSB0b3VjaG9iai5wYWdlWFxyXG5cdCAgICAgICAgc3RhcnRZID0gdG91Y2hvYmoucGFnZVlcclxuXHQgICAgICAgIHN0YXJ0VGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpIC8vIHJlY29yZCB0aW1lIHdoZW4gZmluZ2VyIGZpcnN0IG1ha2VzIGNvbnRhY3Qgd2l0aCBzdXJmYWNlXHJcblx0ICAgICAgICBlLnByZXZlbnREZWZhdWx0KClcclxuXHQgICAgfSwgZmFsc2UpO1xyXG5cclxuXHQgICAgdG91Y2hzdXJmYWNlLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIGZ1bmN0aW9uKGUpe1xyXG5cdCAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpIC8vIHByZXZlbnQgc2Nyb2xsaW5nIHdoZW4gaW5zaWRlIERJVlxyXG5cdCAgICB9LCBmYWxzZSk7XHRcclxuXHRcdCAgICBcclxuXHQgICAgdG91Y2hzdXJmYWNlLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgZnVuY3Rpb24oZSl7XHJcblx0ICAgICAgICB2YXIgdG91Y2hvYmogPSBlLmNoYW5nZWRUb3VjaGVzWzBdXHJcblx0ICAgICAgICBkaXN0WCA9IHRvdWNob2JqLnBhZ2VYIC0gc3RhcnRYIC8vIGdldCBob3Jpem9udGFsIGRpc3QgdHJhdmVsZWQgYnkgZmluZ2VyIHdoaWxlIGluIGNvbnRhY3Qgd2l0aCBzdXJmYWNlXHJcblx0ICAgICAgICBkaXN0WSA9IHRvdWNob2JqLnBhZ2VZIC0gc3RhcnRZIC8vIGdldCB2ZXJ0aWNhbCBkaXN0IHRyYXZlbGVkIGJ5IGZpbmdlciB3aGlsZSBpbiBjb250YWN0IHdpdGggc3VyZmFjZVxyXG5cdCAgICAgICAgZWxhcHNlZFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIHN0YXJ0VGltZSAvLyBnZXQgdGltZSBlbGFwc2VkXHJcblx0ICAgICAgICBpZiAoZWxhcHNlZFRpbWUgPD0gYWxsb3dlZFRpbWUpeyAvLyBmaXJzdCBjb25kaXRpb24gZm9yIGF3aXBlIG1ldFxyXG5cdCAgICAgICAgICAgIGlmIChNYXRoLmFicyhkaXN0WCkgPj0gdGhyZXNob2xkICYmIE1hdGguYWJzKGRpc3RZKSA8PSByZXN0cmFpbnQpeyAvLyAybmQgY29uZGl0aW9uIGZvciBob3Jpem9udGFsIHN3aXBlIG1ldFxyXG5cdCAgICAgICAgICAgICAgICBzd2lwZWRpciA9IChkaXN0WCA8IDApPyAnbGVmdCcgOiAncmlnaHQnIC8vIGlmIGRpc3QgdHJhdmVsZWQgaXMgbmVnYXRpdmUsIGl0IGluZGljYXRlcyBsZWZ0IHN3aXBlXHJcblx0ICAgICAgICAgICAgfVxyXG5cdCAgICAgICAgICAgIGVsc2UgaWYgKE1hdGguYWJzKGRpc3RZKSA+PSB0aHJlc2hvbGQgJiYgTWF0aC5hYnMoZGlzdFgpIDw9IHJlc3RyYWludCl7IC8vIDJuZCBjb25kaXRpb24gZm9yIHZlcnRpY2FsIHN3aXBlIG1ldFxyXG5cdCAgICAgICAgICAgICAgICBzd2lwZWRpciA9IChkaXN0WSA8IDApPyAndXAnIDogJ2Rvd24nIC8vIGlmIGRpc3QgdHJhdmVsZWQgaXMgbmVnYXRpdmUsIGl0IGluZGljYXRlcyB1cCBzd2lwZVxyXG5cdCAgICAgICAgICAgIH1cclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIGhhbmRsZXN3aXBlKHN3aXBlZGlyKVxyXG5cdCAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXHJcblx0ICAgIH0sIGZhbHNlKTsgICAgICAgIFxyXG5cclxuXHR9XHJcblxyXG5cdHRoaXMuaW5pdCgpO1xyXG59XHJcblxyXG52YXIgJEcgPSBuZXcgR2FsbGVyeSgpOyIsIihmdW5jdGlvbih3aW5kb3cpe1xyXG5cdFx0dmFyIGFjY29yZGlvbiA9IHt9O1xyXG5cclxuXHRcdGFjY29yZGlvbi5lbCA9IG51bGw7XHJcblxyXG5cdFx0YWNjb3JkaW9uLmluaXQgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuXHRcdFx0Ly9MaXN0IGFsbCBhY2NvcmRpb25zXHJcblx0XHRcdHZhciBhY0xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdib2R5IC5hY2NvcmRpb24nKTtcclxuXHJcblx0XHRcdC8vVG8gZWFjaCBvbmVcclxuXHRcdFx0Zm9yKCB2YXIgeD0wOyB4PCBhY0xpc3QubGVuZ3RoOyB4KyspIHtcclxuXHRcdFx0XHQvL0FkZCBtZW51LWxhYmVsIGNsaWNrIGV2ZW50IHRvIHNob3cvaGlkZSBib2RkeVxyXG5cdFx0XHRcdGFjTGlzdFt4XS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XHJcblx0XHRcdFx0XHQvLyBTdXBwb3J0IElFNi04XHJcblx0XHRcdFx0XHR2YXIgY2xpY2tlZEVsZW1lbnQgPSBldmVudC50YXJnZXQgfHwgZS5zcmNFbGVtZW50O1xyXG5cclxuXHRcdFx0XHRcdC8vT25seSBsaXN0ZW4gdG8gY2xpY2tzIG9uIG1lbnUtbGFiZWwgZWxlbWVudHMuXHJcblx0XHRcdFx0XHRpZiAoY2xpY2tlZEVsZW1lbnQuY2xhc3NOYW1lLmluZGV4T2YoJ21lbnUtbGFiZWwnKSA+IC0xKSB7XHJcblx0XHRcdFx0XHRcdHNlbGYuX3RvZ2dsZUFjdGl2ZShjbGlja2VkRWxlbWVudCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblxyXG5cdFx0YWNjb3JkaW9uLl90b2dnbGVBY3RpdmUgPSBmdW5jdGlvbihpdGVtKSB7XHJcblx0XHRcdHZhciBib2R5RWwgPSBpdGVtLm5leHRFbGVtZW50U2libGluZztcclxuXHRcdFx0Ly9JZiBpdGVtIHRpdGxlIGlzIG5vdCBhY3RpdmVcclxuXHRcdFx0aWYgKGl0ZW0uY2xhc3NOYW1lLmluZGV4T2YoJ2FjdGl2ZScpID09PSAtMSkge1xyXG5cdFx0XHRcdC8vQWN0aXZhdGUgaXRcclxuXHRcdFx0XHQvL2l0ZW0uY2xhc3NOYW1lICs9ICcgYWN0aXZlICc7XHJcblx0XHRcdFx0aXRlbS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuXHJcblx0XHRcdFx0Ym9keUVsLnN0eWxlLmhlaWdodCA9ICh0aGlzLl9pbm5lckhlaWdodChib2R5RWwpKjEuMykrJ3B4JztcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIHtcclxuXHRcdFx0XHQvL0Rlc2FjdGl2YXRlIGl0XHJcblx0XHRcdFx0Ly9pdGVtLmNsYXNzTmFtZSA9IGl0ZW0uY2xhc3NOYW1lLnJlcGxhY2UoLyBhY3RpdmUgL2csJycpO1x0XHJcblx0XHRcdFx0aXRlbS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuXHRcdFx0XHRib2R5RWwuc3R5bGUuaGVpZ2h0ID0gMDtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmV0dXJuIGl0ZW07XHJcblxyXG5cdFx0fTtcclxuXHJcblx0XHRhY2NvcmRpb24uX2lubmVySGVpZ2h0ID0gZnVuY3Rpb24oZWwpIHtcclxuXHRcdFx0aGVpZ2h0ID0gMDtcclxuXHRcdFx0dmFyIGlubmVyRWxlbWVudHMgPSBlbC5xdWVyeVNlbGVjdG9yQWxsKCcqJyk7XHJcblx0XHRcdGZvcih2YXIgaSA9IDA7IGk8IGlubmVyRWxlbWVudHMubGVuZ3RoOyBpKysgKSB7XHJcblx0XHRcdFx0aGVpZ2h0ICs9IGlubmVyRWxlbWVudHNbaV0uY2xpZW50SGVpZ2h0O1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4gaGVpZ2h0O1xyXG5cdFx0fTtcclxuXHJcblx0XHR3aW5kb3cuJEFDID0gYWNjb3JkaW9uO1xyXG5cclxufSkod2luZG93KTtcclxuXHJcbiRBQy5pbml0KCk7IiwiKGZ1bmN0aW9uKHdpbmRvdyl7XHJcblx0dmFyIGNhbGMgPSB7XHJcblx0cmVzdWx0OiBudWxsLFxyXG5cdGVsZW1lbnRzOiB7XHJcblx0XHQnZGlzcGxheSc6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXNwbGF5JylcclxuXHR9LFxyXG5cclxuXHRfc2V0RGlzcGxheTogZnVuY3Rpb24oY29udGVudCkge1xyXG5cdFx0ZGlzcGxheS52YWx1ZSA9IGNvbnRlbnQ7XHJcblx0fSxcclxuXHJcblx0Y2xlYXI6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fc2V0RGlzcGxheSgnJyk7XHJcblx0fSxcclxuXHJcblx0ZGVsOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBkaXNwbGF5VmFsdWUgPSAgdGhpcy5lbGVtZW50cy5kaXNwbGF5LnZhbHVlLnNsaWNlKDAsLTEpO1xyXG5cclxuXHRcdGlmKGRpc3BsYXlWYWx1ZVtkaXNwbGF5VmFsdWUubGVuZ3RoLTFdID09PSAnLicgXHJcblx0XHQgICB8fCBkaXNwbGF5VmFsdWVbZGlzcGxheVZhbHVlLmxlbmd0aC0xXSA9PT0gJywnIClcdHtcclxuXHRcdFx0ZGlzcGxheVZhbHVlID0gZGlzcGxheVZhbHVlLnNsaWNlKDAsLTEpLy9SZW1vdmUgLCBvciAuXHJcblx0XHR9XHJcblx0XHR0aGlzLl9zZXREaXNwbGF5KGRpc3BsYXlWYWx1ZSk7XHJcblx0fSxcclxuXHRlcXVhbHM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5yZXN1bHQgPSB0aGlzLmVsZW1lbnRzLmRpc3BsYXkudmFsdWU7XHJcblx0XHR2YXIgZXZhbENvZGUgPSAnJysgKHRoaXMucmVzdWx0IC8gMTAwKSArJzsnO1xyXG5cdFx0XHJcblx0XHR0aGlzLl9zZXREaXNwbGF5KGV2YWwoZXZhbENvZGUpKTtcclxuXHR9XHJcbn07XHJcblxyXG53aW5kb3cuY2FsYyA9IGNhbGM7XHJcblxyXG59KSh3aW5kb3cpOyIsIi8vJGNhcm91c2VsXHJcbihmdW5jdGlvbih3aW5kb3cpe1xyXG5cclxuZnVuY3Rpb24gQ2Fyb3VzZWwoZWxlbWVudCkge1xyXG5cdHZhciByb290ID0gZWxlbWVudDtcclxuXHR0aGlzLml0ZW1zID0gcm9vdC5xdWVyeVNlbGVjdG9yQWxsKCcuY2Fyb3VzZWxfX2l0ZW1zID4gLmNhcm91c2VsX19pdGVtJyk7XHJcblx0dGhpcy5uYXZJdGVtcyA9IG51bGw7XHJcblx0dGhpcy5hcnJvd3MgPSBudWxsO1xyXG5cclxuXHR0aGlzLmluaXQgPSBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX2dlbmVyYXRlTmF2aWdhdGlvbigpO1xyXG5cdFx0dGhpcy5fZ2VuZXJhdGVBcnJvd3MoKTtcclxuXHR9O1xyXG5cclxuXHR0aGlzLmdvVG8gPSBmdW5jdGlvbihpbmRleCkge1xyXG5cdFx0dmFyIHNlbGVjdGVkTmF2ID0gcm9vdC5xdWVyeVNlbGVjdG9yKCcuY2Fyb3VzZWxfX25hdiA+IC5jYXJvdXNlbF9fbmF2LWl0ZW0tLWFjdGl2ZScpO1xyXG5cdFx0dmFyIHNlbGVjdGVkQ29udGVudCA9IHJvb3QucXVlcnlTZWxlY3RvcignLmNhcm91c2VsX19pdGVtLS1hY3RpdmUnKTtcclxuXHJcblx0XHRzZWxlY3RlZE5hdi5jbGFzc0xpc3QucmVtb3ZlKCdjYXJvdXNlbF9fbmF2LWl0ZW0tLWFjdGl2ZScpO1xyXG5cdFx0c2VsZWN0ZWRDb250ZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2Nhcm91c2VsX19pdGVtLS1hY3RpdmUnKTtcclxuXHJcblx0XHR0aGlzLm5hdkl0ZW1zW2luZGV4XS5jbGFzc0xpc3QuYWRkKCdjYXJvdXNlbF9fbmF2LWl0ZW0tLWFjdGl2ZScpO1xyXG5cdFx0dGhpcy5pdGVtc1tpbmRleF0uY2xhc3NMaXN0LmFkZCgnY2Fyb3VzZWxfX2l0ZW0tLWFjdGl2ZScpO1xyXG5cdH1cclxuXHJcblx0dGhpcy5hcnJvd05hdiA9IGZ1bmN0aW9uKGRpcmVjdGlvbikge1xyXG5cdFx0dmFyIHNlbGVjdGVkTmF2ID0gcm9vdC5xdWVyeVNlbGVjdG9yKCcuY2Fyb3VzZWxfX25hdiA+IC5jYXJvdXNlbF9fbmF2LWl0ZW0tLWFjdGl2ZScpO1xyXG5cdFx0dmFyIGdvdG9JbmRleCA9IE51bWJlci5wYXJzZUludChzZWxlY3RlZE5hdi5kYXRhc2V0LmluZGV4KSArIGRpcmVjdGlvbjtcdFx0XHJcblx0XHR2YXIgZ29UbyA9IHRoaXMubmF2SXRlbXNbZ290b0luZGV4XTtcclxuXHJcblx0XHRpZihnb1RvID09PSB1bmRlZmluZWQpIHtcclxuXHRcdFx0KGRpcmVjdGlvbiA+IDApID8gZ290b0luZGV4ID0gMCA6IGdvdG9JbmRleCA9IHRoaXMubmF2SXRlbXMubGVuZ3RoIC0gMTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLmdvVG8oZ290b0luZGV4KTtcclxuXHR9XHJcblxyXG5cdHRoaXMuX2dlbmVyYXRlTmF2aWdhdGlvbiA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cdFx0dmFyIGl0ZW1zID0gdGhpcy5pdGVtcztcclxuXHRcdHZhciBodG1sID0gJyc7XHJcblx0XHR2YXIgZmlyc3RDbGFzcyA9ICdjYXJvdXNlbF9fbmF2LWl0ZW0tLWFjdGl2ZSc7XHJcblxyXG5cdFx0dmFyIG5hdkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHJcblx0XHRodG1sICs9ICc8dWwgY2xhc3M9XCJjYXJvdXNlbF9fbmF2XCI+JztcclxuXHJcblx0XHRmb3IodmFyIHggPSAwOyB4IDwgaXRlbXMubGVuZ3RoOyB4KyspIHtcclxuXHRcdFx0aHRtbCArPSAnPGxpIGNsYXNzPVwiY2Fyb3VzZWxfX25hdi1pdGVtICcrIGZpcnN0Q2xhc3MgKydcIiBkYXRhLWluZGV4PScreCsnPiA8L2xpPic7XHJcblx0XHRcdGZpcnN0Q2xhc3MgPSAnJztcclxuXHRcdH1cclxuXHJcblx0XHRodG1sICs9ICc8L3VsPic7XHJcblxyXG5cdFx0bmF2RWxlbWVudC5pbm5lckhUTUwgPSBodG1sO1xyXG5cclxuXHRcdHJvb3QuYXBwZW5kQ2hpbGQobmF2RWxlbWVudCk7XHJcblx0XHR0aGlzLm5hdkl0ZW1zID0gcm9vdC5xdWVyeVNlbGVjdG9yQWxsKCcuY2Fyb3VzZWxfX25hdiA+IGxpJyk7XHJcblxyXG5cdFx0Zm9yICh2YXIgeCA9IDA7IHggPCB0aGlzLm5hdkl0ZW1zLmxlbmd0aDsgeCsrKSB7XHJcblx0XHRcdHRoaXMubmF2SXRlbXNbeF0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpe1xyXG5cdFx0XHRcdHNlbGYuYXJyb3dOYXYoMSk7XHJcblx0XHRcdFx0c2VsZi5nb1RvKHRoaXMuZGF0YXNldC5pbmRleCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0dGhpcy5fZ2VuZXJhdGVBcnJvd3MgPSBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBzZWxmID0gdGhpcztcclxuXHRcdHZhciBhcnJvd0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdFx0YXJyb3dDb250YWluZXIuaW5uZXJIVE1MID0gXHJcblx0XHQnPHNwYW4gY2xhc3M9XCJjYXJvdXNlbF9fYXJyb3cgY2Fyb3VzZWxfX2Fycm93LS1sZWZ0IGZhIGZhLWNoZXZyb24tbGVmdFwiPjwvc3Bhbj4nXHJcblx0ICBcdCsnPHNwYW4gY2xhc3M9XCJjYXJvdXNlbF9fYXJyb3cgY2Fyb3VzZWxfX2Fycm93LS1yaWdodCBmYSBmYS1jaGV2cm9uLXJpZ2h0XCI+PC9zcGFuPic7XHJcblxyXG5cdCAgXHRyb290LmFwcGVuZENoaWxkKGFycm93Q29udGFpbmVyKTtcclxuXHJcblx0ICBcdHJvb3QucXVlcnlTZWxlY3RvcignLmNhcm91c2VsX19hcnJvdy0tbGVmdCcpXHJcblx0ICBcdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCl7XHJcbiAgXHRcdFx0c2VsZi5hcnJvd05hdigtMSk7XHJcblx0ICBcdH0pO1xyXG5cclxuXHRcdHJvb3QucXVlcnlTZWxlY3RvcignLmNhcm91c2VsX19hcnJvdy0tcmlnaHQnKVxyXG5cdCAgXHQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpe1xyXG4gIFx0XHRcdHNlbGYuYXJyb3dOYXYoMSk7XHJcblx0ICBcdH0pO1x0ICBcdFxyXG5cdH1cclxufVxyXG5cclxud2luZG93LmNhcm91c2VsID0gZnVuY3Rpb24oZWxlbWVudHMpIHtcclxuXHR2YXIgY2Fyb3VzZWxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNhcm91c2VsJyk7XHJcblxyXG5cclxuXHRmb3IgKHZhciB4ID0gMDsgeCA8IGNhcm91c2Vscy5sZW5ndGg7IHgrKykge1xyXG5cdFx0dmFyIGNhciA9IG5ldyBDYXJvdXNlbChjYXJvdXNlbHNbeF0pO1xyXG5cdFx0Y2FyLmluaXQoKTtcclxuXHR9XHJcblxyXG5cdHJldHVybiBjYXI7XHJcbn0oKTtcclxufSkod2luZG93KTsiLCJmdW5jdGlvbiB3aW5kb3dXaWR0aENvdW50KCkge1xyXG5cdHZhciAkd2lkdGhMYWJlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53aW5kb3ctd2lkdGgtbGFiZWwnKTtcdFxyXG5cdCR3aWR0aExhYmVsLmlubmVySFRNTCA9IHdpbmRvdy5vdXRlcldpZHRoO1xyXG59XHJcblxyXG53aW5kb3cub25sb2FkID0gZnVuY3Rpb24oKSB7XHJcblx0d2luZG93V2lkdGhDb3VudCgpO1xyXG59XHJcblxyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgZnVuY3Rpb24oKXtcclxuXHR3aW5kb3dXaWR0aENvdW50KCk7XHRcclxufSk7XHJcblxyXG5mdW5jdGlvbiBjbG9zZUxhdGVyYWxNZW51KCkge1xyXG5cdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtZW51LW9wZW4nKS5jaGVja2VkID0gJyc7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGxvYWRMaXZlRXhhbXBsZShzcmMpIHtcclxuXHR2YXIgJGlmcmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pZnJhbWUtbGl2ZScpO1xyXG5cdCRpZnJhbWUuc3JjID0gc3JjO1xyXG59IiwiKGZ1bmN0aW9uKHdpbmRvdyl7XHJcblx0Ly9HZXQgYWxsIGltYWdlcyB0byBiZSBsYXp5IGxvYWRlZFxyXG5cdCRpbWFnZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbWdbZGF0YS1zcmNdJyk7XHJcblxyXG5cdC8vVG8gZWFjaCBpbWFnZVxyXG5cdGZvcih2YXIgeD0wOyB4PCRpbWFnZXMubGVuZ3RoOyB4KyspIHtcclxuXHRcdHZhciBsb2FkaW5nID0gY3JlYXRlTG9hZGluZygpO1xyXG5cclxuXHRcdC8vSW5zZXJ0IGxvYWRpbmcgZWxlbWVudCBiZWZvcmUgdGhlIGltYWdlXHJcblx0XHQkaW1hZ2VzW3hdLnBhcmVudEVsZW1lbnQuaW5zZXJ0QmVmb3JlKGxvYWRpbmcsICRpbWFnZXNbeF0pO1xyXG5cclxuXHRcdC8vRGVmaW5lIHNyYyBhdHRyaWJ1dGUgd2l0aCB0aGUgZGF0YS1zcmNcclxuXHRcdCRpbWFnZXNbeF0uc2V0QXR0cmlidXRlKCdzcmMnLCAkaW1hZ2VzW3hdLmdldEF0dHJpYnV0ZSgnZGF0YS1zcmMnKSk7XHJcblxyXG5cdFx0JGltYWdlc1t4XS5vbmxvYWQgPSBvbkxvYWRJbWFnZSgkaW1hZ2VzW3hdLGxvYWRpbmcpO1xyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gb25Mb2FkSW1hZ2UoaW1hZ2UsIGxvYWRpbmcpIHtcclxuXHRcdHJldHVybiBmdW5jdGlvbigpIHtcclxuXHRcdFx0Ly9SZW1vdmUgbG9hZGluZyB3aGVuIGltYWdlIGxvYWRzLlxyXG5cdFx0XHRsb2FkaW5nLnJlbW92ZSgpO1xyXG5cdFx0XHQvL1JlbW92ZSBkYXRhLXNyYyB0byBhcHBseSB0aGUgbmVlZGVkIGNzcyBhbmltYXRpb25zLiBcclxuXHRcdFx0aW1hZ2UucmVtb3ZlQXR0cmlidXRlKCdkYXRhLXNyYycpO1x0XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0ZnVuY3Rpb24gY3JlYXRlTG9hZGluZygpIHtcclxuXHRcdHZhciBsb2FkaW5nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblx0XHRsb2FkaW5nLmNsYXNzTGlzdC5hZGQoXCJpbWctbG9hZGVyXCIpO1xyXG5cdFx0bG9hZGluZy5pbm5lckhUTUwgPSAnPGRpdiBjbGFzcz1cImltZy1sb2FkZXJfX2ljb25cIj4nXHJcblx0XHQrICc8c3BhbiBjbGFzcz1cImZhIGZhLXJlZnJlc2ggZmEtc3BpblwiPjwvc3Bhbj4nXHJcblx0XHQrICc8L2Rpdj4nO1xyXG5cclxuXHRcdHJldHVybiBsb2FkaW5nO1xyXG5cdH1cclxuXHJcblxyXG59KSh3aW5kb3cpOyIsIihmdW5jdGlvbih3aW5kb3cpe1xyXG4vL0NsYXNzIGFwcGxpZWQgd2hlbiBtb2RhbCBvcGFjaXR5IGlzIDFcclxudmFyIGNiQ2xhc3MgPSAnbW9kYWxfX292ZXJsYXktLWFjdGl2ZSc7XHJcblxyXG5mdW5jdGlvbiBmYWRlT3V0KGVsKXtcclxuICBlbC5zdHlsZS5vcGFjaXR5ID0gMTtcclxuXHJcbiAgKGZ1bmN0aW9uIGZhZGUoKSB7XHJcbiAgICBpZiAoKGVsLnN0eWxlLm9wYWNpdHkgLT0gLjEpIDwgMCkge1xyXG4gICAgICAvL2VsLnJlbW92ZSgpO1xyXG4gICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoY2JDbGFzcyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZmFkZSk7XHJcbiAgICB9XHJcbiAgfSkoKTtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIGZhZGVJbihlbCl7XHJcbiAgZWwuc3R5bGUub3BhY2l0eSA9IDA7XHJcbiAgZWwuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuXHJcbiAgKGZ1bmN0aW9uIGZhZGUoKSB7XHJcbiAgICB2YXIgdmFsID0gcGFyc2VGbG9hdChlbC5zdHlsZS5vcGFjaXR5KTtcclxuICAgIC8vSW5jcmVhc2Ugb3BhY2l0eSB3aGlsZSBpdCBpcyBub3QgdG90YWxseSBvcGFxdWUuXHJcbiAgICBpZiAoISgodmFsICs9IC4xKSA+IDEpKSB7XHJcbiAgICAgIGVsLnN0eWxlLm9wYWNpdHkgPSB2YWw7XHJcbiAgICAgIGVsLmNsYXNzTGlzdC5hZGQoY2JDbGFzcyk7XHJcbiAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShmYWRlKTtcclxuICAgIH1cclxuICB9KSgpO1xyXG59XHJcblxyXG53aW5kb3cubW9kYWwgPSBmdW5jdGlvbihpZE1vZGFsKSB7XHJcbiAgdmFyIG1vZGFsT3ZlcmxheSA9IG51bGw7XHJcbiAgdmFyIG1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtbW9kYWwtaWQ9XCInKyBpZE1vZGFsICsnXCJdJyk7XHJcblxyXG4gIGZ1bmN0aW9uIF9jcmVhdGVPdmVybGF5KCkge1xyXG4gICAgdmFyIGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Jyk7XHJcblxyXG4gICAgLy9DcmVhdGUgbW9kYWwgb3ZlcmxheSBlbGVtZW50XHJcbiAgICBtb2RhbE92ZXJsYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzZWN0aW9uJyk7XHJcbiAgICBtb2RhbE92ZXJsYXkuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgXHJcbiAgICBtb2RhbE92ZXJsYXkuY2xhc3NMaXN0LmFkZCgnbW9kYWxfX292ZXJsYXknKTtcclxuICAgIG1vZGFsT3ZlcmxheS5jbGFzc0xpc3QuYWRkKCdtb2RhbF9fb3ZlcmxheS0tYWN0aXZlJyk7XHJcbiAgICBcclxuICAgIC8vTWFrZSBtb2RhbCBjb250YWluZXIgdmlzaWJsZVxyXG4gICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuXHJcbiAgICAvL0FwcGVuZCBtb2RhbCBjb250YWluZXIgaW50byB0aGUgZnJlc2ggbmV3IG92ZXJsYXlcclxuICAgIG1vZGFsT3ZlcmxheS5hcHBlbmRDaGlsZChtb2RhbCk7XHJcbiAgICBcclxuICAgIC8vQXBwZW5kIG1vZGFsIG92ZXJsYXkgaW50byB0aGUgZG9jdW1lbnQuXHJcbiAgICBib2R5LmFwcGVuZENoaWxkKG1vZGFsT3ZlcmxheSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBfcmVnaXN0ZXJDbG9zZUV2ZW50cygpIHtcclxuICAgIHZhciBjbG9zZUVsZW1lbnRzID0gbW9kYWxPdmVybGF5LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWNsb3NlXScpO1xyXG5cclxuICAgIGZvcih2YXIgeCA9IDA7IHggPCBjbG9zZUVsZW1lbnRzLmxlbmd0aDsgeCsrKSB7XHJcbiAgICAgIGNsb3NlRWxlbWVudHNbeF0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpe1xyXG4gICAgICAgIGZhZGVPdXQobW9kYWxPdmVybGF5KTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8vQ2hlY2sgaWYgbW9kYWwgaXMgYWxyZWFkeSBjcmVhdGVkLlxyXG4gIGlmKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9fb3ZlcmxheSA+IFtkYXRhLW1vZGFsLWlkPVwiJysgaWRNb2RhbCArJ1wiXScpKSB7XHJcbiAgICAvL1NldCBtb2RhbCBvdmVybGF5IGFzIHRoZSBhbHJlYWR5IGNyZWF0ZWQgbW9kYWwgb3ZlcmxheS4gICAgXHJcbiAgICBtb2RhbE92ZXJsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX292ZXJsYXkgPiBbZGF0YS1tb2RhbC1pZD1cIicrIGlkTW9kYWwgKydcIl0nKS5wYXJlbnRFbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgaWYobW9kYWxPdmVybGF5ID09PSBudWxsKSB7XHJcbiAgICBfY3JlYXRlT3ZlcmxheSgpO1xyXG4gICAgX3JlZ2lzdGVyQ2xvc2VFdmVudHMoKTtcclxuICB9XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBmYWRlSW46IGZ1bmN0aW9uKCkge1xyXG4gICAgICBjb25zb2xlLmxvZyhtb2RhbE92ZXJsYXkpO1xyXG4gICAgICBmYWRlSW4obW9kYWxPdmVybGF5KTtcclxuICAgIH0sXHJcbiAgICBmYWRlT3V0OiBmdW5jdGlvbigpe1xyXG4gICAgICBjb25zb2xlLmxvZyhtb2RhbE92ZXJsYXkpO1xyXG4gICAgICBmYWRlT3V0KG1vZGFsT3ZlcmxheSk7XHJcbiAgICB9XHJcbiAgfTtcclxufVxyXG5cclxuLy9Jbml0IG1vZGFsIG9wZW5lcnNcclxudmFyIG1vZGFsT3BlbmVycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLW1vZGFsLW9wZW5dJyk7XHJcblxyXG4vL0FkZCBmYWRlSW4gYWN0aW9uIG9uIGNsaWNrIGV2ZW50IG9mIGFsbCBtb2RhbCBvcGVuZXIgZWxlbWVudHMuXHJcbmZvcih2YXIgeD0wOyB4PCBtb2RhbE9wZW5lcnMubGVuZ3RoOyB4KyspIHtcclxuICBtb2RhbE9wZW5lcnNbeF0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgaWRNb2RhbCA9IHRoaXMuZGF0YXNldC5tb2RhbE9wZW47XHJcbiAgICB3aW5kb3cubW9kYWwoaWRNb2RhbCkuZmFkZUluKCk7XHJcbiAgfSk7XHJcbn1cclxuXHJcblxyXG59KSh3aW5kb3cpO1xyXG5cclxuIiwiLy8gUmVmZXJlbmNlOiBodHRwOi8vd3d3LnBhdWxpcmlzaC5jb20vMjAxMS9yZXF1ZXN0YW5pbWF0aW9uZnJhbWUtZm9yLXNtYXJ0LWFuaW1hdGluZy9cclxud2luZG93LnJlcXVlc3RBbmltRnJhbWUgPSAoZnVuY3Rpb24oKSB7XHJcbiAgcmV0dXJuIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHxcclxuICAgIHdpbmRvdy53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHxcclxuICAgIHdpbmRvdy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHxcclxuICAgIGZ1bmN0aW9uKGNhbGxiYWNrKSB7XHJcbiAgICAgIC8vV29yc3QgY2FzZSBzY2VuYXJpbyB0cmlnZ2VyIGFuaW1hdGlvbiB2aWEgc2V0VGltZW91dC5cclxuICAgICAgd2luZG93LnNldFRpbWVvdXQoY2FsbGJhY2ssIDEwMDAgLyA2MCk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG5cclxuLy9UaGlzIGlzIGFuIGFkYXB0YXRpb24gZnJvbSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xNzcyMjQ5Ny9zY3JvbGwtc21vb3RobHktdG8tc3BlY2lmaWMtZWxlbWVudC1vbi1wYWdlXHJcbihmdW5jdGlvbih3aW5kb3cpe1xyXG4gIHZhciBzZWxmID0gdGhpcztcclxuXHJcbiAgLy9UT0RPIEZsZXhiaWxpemUgdGhpcyBjb2RlLlxyXG4gIHZhciBzY3JvbGxXaW5kb3cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGVudC1ob2xkZXInKTtcclxuICBcclxuICAvL1RPRE8gRmxleGliaWxpemUgdGhpcyBjb2RlLlxyXG4gIHZhciBtZW51SGVpZ2h0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5hdmJhcicpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodCArIDEwO1xyXG4gICAgXHJcbiAgc2VsZi5nZXRQb3NZID0gZnVuY3Rpb24oZWxlbWVudCkge1xyXG4gICAgZWxlbWVudCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICByZXR1cm4gZWxlbWVudC50b3AgKyBzY3JvbGxXaW5kb3cuc2Nyb2xsVG9wIC0gKG1lbnVIZWlnaHQpO1xyXG4gIH07XHJcblxyXG4gIHNlbGYuc2Nyb2xsVG9FbGVtZW50ID0gZnVuY3Rpb24oZWxlbWVudCwgZHVyYXRpb24sIGNiRnVuY3Rpb24pIHsgXHJcbiAgICBpZiggIWR1cmF0aW9uICkge1xyXG4gICAgICBkdXJhdGlvbiA9IDEwMDA7XHJcbiAgICB9XHJcblxyXG4gICAgLy9JZiBDU1Mgc2VsZWN0b3IgaXMgcGFzc2VkLlxyXG4gICAgaWYoICFlbGVtZW50Lm5vZGVOYW1lICkge1xyXG4gICAgICAvLyBRdWVyeSBpdCBpbnRvIERPTSBlbGVtZW50XHJcbiAgICAgIGVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGVsZW1lbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmKCAhZWxlbWVudCApIHtcclxuICAgICAgdGhyb3cgXCJFbGVtZW50IGluZXhpc3RlbnQhXCI7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIHN0YXJ0aW5nWSA9IHNjcm9sbFdpbmRvdy5zY3JvbGxUb3A7XHJcblxyXG4gICAgdmFyIGRpZmYgPSBzZWxmLmdldFBvc1koZWxlbWVudCkgLSBzdGFydGluZ1k7XHJcbiAgICB2YXIgc3RhcnQ7XHJcblxyXG4gICAgLy9Hb3QgZnJvbSBodHRwczovL2dpc3QuZ2l0aHViLmNvbS9ncmUvMTY1MDI5NFxyXG4gICAgdmFyIGVhc2luZyA9IGZ1bmN0aW9uICh0KSB7IFxyXG4gICAgICByZXR1cm4gdCA8IC41ID8gNCp0KnQqdCA6ICh0LTEpKigyKnQtMikqKDIqdC0yKSsxOyBcclxuICAgIH1cclxuXHJcbiAgICAvLyBCb290c3RyYXAgb3VyIGFuaW1hdGlvbiAtIGl0IHdpbGwgZ2V0IGNhbGxlZCByaWdodCBiZWZvcmUgbmV4dCBmcmFtZSBzaGFsbCBiZSByZW5kZXJlZC5cclxuICAgIHdpbmRvdy5yZXF1ZXN0QW5pbUZyYW1lKGZ1bmN0aW9uIHN0ZXAodGltZXN0YW1wKSB7XHJcbiAgICAgIGlmICghc3RhcnQpIHN0YXJ0ID0gdGltZXN0YW1wO1xyXG4gICAgICBcclxuICAgICAgLy8gRWxhcHNlZCBtaWxpc2Vjb25kcyBzaW5jZSBzdGFydCBvZiBzY3JvbGxpbmcuXHJcbiAgICAgIHZhciB0aW1lID0gdGltZXN0YW1wIC0gc3RhcnQ7XHJcbiAgICAgIC8vIEdldCBwZXJjZW50IG9mIGNvbXBsZXRpb24gaW4gcmFuZ2UgWzAsIDFdLlxyXG4gICAgICB2YXIgcGVyY2VudCA9IE1hdGgubWluKHRpbWUgLyBkdXJhdGlvbiwgMSk7XHJcblxyXG4gICAgICBwZXJjZW50ID0gZWFzaW5nKHBlcmNlbnQpO1xyXG4gICAgICBcclxuICAgICAgc2Nyb2xsV2luZG93LnNjcm9sbFRvKDAsIHN0YXJ0aW5nWSArIGRpZmYgKiBwZXJjZW50KTtcclxuXHJcbiAgICAgIC8vIFByb2NlZWQgd2l0aCBhbmltYXRpb24gYXMgbG9uZyBhcyB3ZSB3YW50ZWQgaXQgdG8uXHJcbiAgICAgIGlmICh0aW1lIDwgZHVyYXRpb24pIHtcclxuICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1GcmFtZShzdGVwKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmKGNiRnVuY3Rpb24pIHtcclxuICAgICAgICAvL09uIGFuaW1hdGlvbiBlbmQgZXhlY3V0ZSBjYWxsYmFjayBmdW5jdGlvbiBpZiBwcm92aWRlZC5cclxuICAgICAgICBjYkZ1bmN0aW9uKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICB9O1xyXG5cclxuICB3aW5kb3cuc2Nyb2xsVG9FbGVtZW50ID0gc2VsZi5zY3JvbGxUb0VsZW1lbnQ7XHJcbiAgXHJcblxyXG59KSh3aW5kb3cpO1xyXG5cclxuXHJcbiIsIlxyXG4oZnVuY3Rpb24od2luZG93KXtcclxuXHJcblx0dmFyIHRhYnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGFiX190aXRsZScpO1xyXG5cclxuXHRmdW5jdGlvbiB0b2dnbGVUYWIodGFiSWQpIHtcclxuXHRcdHZhciBwcmV2aW91c1RhYnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGFiX190aXRsZS0tc2VsZWN0ZWQnKTtcclxuXHRcdHZhciBwcmV2aW91c0NvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGFiX19jb250ZW50LS1zZWxlY3RlZCcpO1xyXG5cdFx0dmFyIGFjdGl2ZUNvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiW2RhdGEtY29udGVudC1pZD0nXCIrdGFiSWQrXCInXVwiKTtcclxuXHRcdHZhciBhY3RpdmVUYWJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIltkYXRhLXRhYi1pZD0nXCIrdGFiSWQrXCInXVwiKTtcclxuXHRcdFxyXG5cdFx0Ly9EZWFjdGl2YXRlIHByZXZpb3VzIHNlbGVjdGVkIHRhYnNcclxuXHRcdGZvcih2YXIgaT0wOyBpIDwgcHJldmlvdXNUYWJzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdHByZXZpb3VzVGFic1tpXS5jbGFzc0xpc3QucmVtb3ZlKCd0YWJfX3RpdGxlLS1zZWxlY3RlZCcpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vQWN0aXZhdGUgdGhlIGN1cnJlbnQgY29udGVudFxyXG5cdFx0Zm9yKHZhciBpPTA7IGkgPCBhY3RpdmVUYWJzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdGFjdGl2ZVRhYnNbaV0uY2xhc3NMaXN0LmFkZCgndGFiX190aXRsZS0tc2VsZWN0ZWQnKTtcclxuXHRcdH1cclxuXHJcblx0XHQvL1RvZ2dsZSBiZXR3ZWVuIHByZXZpb3VzIGNvbnRlbnQgYW5kIFxyXG5cdFx0cHJldmlvdXNDb250ZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3RhYl9fY29udGVudC0tc2VsZWN0ZWQnKTtcclxuXHRcdGFjdGl2ZUNvbnRlbnQuY2xhc3NMaXN0LmFkZCgndGFiX19jb250ZW50LS1zZWxlY3RlZCcpO1xyXG5cdH1cclxuXHJcblx0Zm9yKHZhciBpID0wIDsgaSA8IHRhYnMubGVuZ3RoOyBpKyspIHtcclxuXHJcblx0XHR0YWJzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxmdW5jdGlvbigpe1xyXG5cdFx0XHR0b2dnbGVUYWIodGhpcy5kYXRhc2V0LnRhYklkKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0dmFyIHRhYnNDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGFiX19jb250YWluZXIgPiAudGFiX190aXRsZScpO1xyXG5cclxuXHRmb3IodmFyIGkgPSAwOyBpIDwgdGFic0NvbnRhaW5lci5sZW5ndGg7IGkrKykge1xyXG5cdFx0Ly9PbiBtb2JpbGUgZGV2aWNlcywgcG9zaXRpb24gdGhlIHdpbmRvdyBpbiBmcm9udCBvZiB0aGUgYWN0aXZlIHRhYi5cclxuXHRcdHRhYnNDb250YWluZXJbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLGZ1bmN0aW9uKCl7XHJcblx0XHRcdHdpbmRvdy5zY3JvbGxUb0VsZW1lbnQodGhpcywxMDAwKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcbn0pKHdpbmRvdyk7XHJcbiIsIihmdW5jdGlvbih3aW5kb3cpIHtcblx0J3VzZSBzdHJpY3QnO1xuXG5cdGZ1bmN0aW9uIF9nZW5lcmF0ZU51bWJlcigpIHtcblx0XHRyZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMjAwKTtcblx0fVxuXG5cdGZ1bmN0aW9uIF9yZW5kZXIobnVtYmVyLCBhbnN3ZXIpIHtcblx0XHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHJpdmlhTnVtYmVyJykuaW5uZXJIVE1MID0gbnVtYmVyO1xuXHRcdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0cml2aWFBbnN3ZXInKS5pbm5lckhUTUwgPSBhbnN3ZXI7XG5cdH1cblxuXHRmdW5jdGlvbiBfcmVxdWVzdFRyaXZpYShudW1iZXIpIHtcblx0XHR2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cblx0XHR4aHIub25sb2FkID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRfcmVuZGVyKG51bWJlciwgdGhpcy5yZXNwb25zZSk7XG5cdFx0fTtcblxuXHRcdHhoci5vcGVuKCdHRVQnLCAnaHR0cDovL251bWJlcnNhcGkuY29tLycgKyBudW1iZXIpO1xuXHRcdHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdBY2NlcHQnLCAnYXBwbGljYXRpb24vanNvbicpO1xuXHRcdHhoci5zZW5kKCk7XG5cdH1cblxuXHRmdW5jdGlvbiBuZXdUcml2aWEoKSB7XG5cdFx0X3JlcXVlc3RUcml2aWEoX2dlbmVyYXRlTnVtYmVyKCkpO1xuXHR9XG5cblx0bmV3VHJpdmlhKCk7XG5cblx0d2luZG93Lm5ld1RyaXZpYSA9IG5ld1RyaXZpYTtcbn0pKHdpbmRvdyk7XG4iXX0=
